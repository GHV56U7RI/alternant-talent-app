<!doctype html><meta charset="utf-8"/>
<title>Entreprises · Alternant & Talent</title>
<h1>Espace Entreprises</h1>

<form id="signup">
  <h2>Créer un compte</h2>
  <input name="email" type="email" placeholder="email" required>
  <input name="password" type="password" placeholder="mot de passe" required>
  <button>Créer</button>
</form>

<form id="login" style="margin-top:1rem">
  <h2>Connexion</h2>
  <input name="email" type="email" placeholder="email" required>
  <input name="password" type="password" placeholder="mot de passe" required>
  <button>Se connecter</button>
</form>

<pre id="me"></pre>

<script>
async function toJSON(res){ if(!res.ok) throw new Error('HTTP '+res.status); return res.json(); }
signup.onsubmit = async (e) => {
  e.preventDefault();
  const body = Object.fromEntries(new FormData(signup));
  const r = await fetch('/api/auth/register',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify(body)}).then(toJSON);
  alert('Compte créé ✅');
};
login.onsubmit = async (e) => {
  e.preventDefault();
  const body = Object.fromEntries(new FormData(login));
  await fetch('/api/auth/login',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify(body)}).then(toJSON);
  me.textContent = JSON.stringify(await fetch('/api/auth/me').then(r=>r.json()), null, 2);
};
</script>

