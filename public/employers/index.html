<!doctype html><meta charset="utf-8"><title>Espace Employeur</title>
<link rel="stylesheet" href="/assets/nav.css">
<nav>
  <a href="/index.html">Accueil</a>
  <a href="/students/index.html">Étudiants</a>
  <a href="/employers/index.html">Employeurs</a>
</nav>
<h1>Employeur – Démo</h1>
<form id="reg">
  <input name="email" placeholder="email" required>
  <input name="password" type="password" placeholder="mot de passe" required>
  <button>Créer le compte</button>
</form>
<form id="login" style="margin-top:8px">
  <input name="email" placeholder="email">
  <input name="password" type="password" placeholder="mot de passe">
  <button>Se connecter</button>
</form>
<button id="logout" style="margin-top:8px">Se déconnecter</button>
<pre id="me">{}</pre>
<script>
async function api(p,o={}){const r=await fetch(p,{credentials:'include',...o});const t=await r.text();try{return{ok:r.ok,json:JSON.parse(t)}}catch{return{ok:r.ok,text:t}}}
async function me(){const r=await api('/api/employer/auth/me');document.querySelector('#me').textContent=JSON.stringify(r.json||r.text||r,null,2)}
document.querySelector('#reg').addEventListener('submit',async e=>{e.preventDefault();const f=new FormData(e.target);await api('/api/employer/auth/register',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({email:f.get('email'),password:f.get('password')})});me()})
document.querySelector('#login').addEventListener('submit',async e=>{e.preventDefault();const f=new FormData(e.target);await api('/api/employer/auth/login',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify({email:f.get('email'),password:f.get('password')})});me()})
document.querySelector('#logout').addEventListener('click',()=>api('/api/employer/auth/logout',{method:'POST'}).then(me))
me()
</script>
